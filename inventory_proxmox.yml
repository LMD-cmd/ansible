# Diese Datei holt automatisch alle Container von Proxmox
plugin: community.proxmox.proxmox
url: "https://10.0.200.97:8006"  # <-- Deine Proxmox-IP anpassen!
validate_certs: false
user: "root@pam"
token_id: "ansible"               # Dein Token-Name von oben
token_secret: "7bf9b58d-7236-4d3a-8b3e-c8e847587e7e"

# WICHTIG: Das hier hat gefehlt!
# Ohne das weiß Ansible nicht, ob ein Container läuft oder nicht.
want_facts: true

# Das verhindert, dass dein Proxmox-Host (pve-01) in der Liste landet
want_proxmox_nodes_ansible_host: false

# Wir nutzen keyed_groups statt filters, das ist robuster
keyed_groups:
  - key: proxmox_type
    prefix: proxmox_type
  - key: proxmox_status
    prefix: proxmox_status

compose:
  ansible_connection: "'community.proxmox.proxmox_pct_remote'"
  ansible_host: "'10.0.200.97'" # <-- Proxmox Node IP
  ansible_user: "'root'"
  ansible_proxmox_vmid: proxmox_vmid